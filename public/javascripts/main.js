function wave(){var e=document.getElementById("planeWave"),t=1245e3,i="#1D1D1D",s=new THREE.PerspectiveCamera(55,window.innerWidth/window.innerHeight,1,4e5);s.position.z=1e4,s.position.y=1e4;var o=new THREE.Scene;o.fog=new THREE.Fog(i,1,3e5);var r=new THREE.PlaneGeometry(t,t,100,100),a=new THREE.Mesh(r,new THREE.MeshBasicMaterial({color:"#005e97",wireframe:!0}));a.rotation.x-=.5*Math.PI,o.add(a);var n=new THREE.WebGLRenderer({alpha:!1});n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(i,1),e.appendChild(n.domElement),function(){for(var e=0;e<r.vertices.length;e++)r.vertices[e].z+=15e3*Math.random()-15e3,r.vertices[e]._myZ=r.vertices[e].z}(),function e(){requestAnimationFrame(e);var t=s.position.x,i=s.position.z;s.position.x=t*Math.cos(.001)+i*Math.sin(.001)-10,s.position.z=i*Math.cos(.001)-t*Math.sin(.001)-10;for(var d=0;d<r.vertices.length;d++){i=+r.vertices[d].z;r.vertices[d].z=Math.sin(d+2e-5*c)*(r.vertices[d]._myZ-.6*r.vertices[d]._myZ),a.geometry.verticesNeedUpdate=!0,c+=.1}n.render(o,s)}();var c=0;window.addEventListener("resize",(function(){s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)}),!1)}function sphere(){const e=7e-4;let t=document.getElementById("svg-container"),i=Array(t.children.length),s=[...t.children].map(((e,t)=>("g"==e.children[0].tagName?(e=e.children[0],i[t]=Array(e.children.length),i[t][0]=e.getAttribute("fill")):i[t]=Array(e.children.length),[...e.children].map(((e,s)=>{let o=e.getAttribute("fill");return i[t][s]=null!==o?o:i[t][0]?i[t][0]:"#FFF",new Path2D(e.getAttribute("d"))})))));const o=s.length;var r=document.getElementById("myCanvas"),a=r.getContext("2d");let n,c,d,h,l=r.offsetWidth,m=r.offsetHeight;function v(){n=.8*l,c=l/1.7,d=m/1.7,h=l/4,l=r.offsetWidth,m=r.offsetHeight,window.devicePixelRatio>1?(r.width=2*r.clientWidth,r.height=2*r.clientHeight,a.scale(2,2)):(r.width=l,r.height=m)}window.addEventListener("resize",v),v();let p=Math.PI*(3-Math.sqrt(5)),g=e,f=e,u=e,w=0,y=0,E=!1;r.addEventListener("mousemove",(e=>{E=!0,w=e.offsetX-l/2,y=e.offsetY-m/2,f=.05*w/l,u=.05*y/m})),r.addEventListener("mouseout",(function(t){E=!1;let i=-1*Math.atan2(y-m/2,w-l/2)+.5*Math.PI;Math.cos(i),Math.sin(i);!function t(){E||(u/=1.3,f/=1.3,Math.abs(u)<=e&&(u=Math.sign(u)*e),Math.abs(f)<=e&&(f=Math.sign(f)*e),u!=e&&f!=e&&setTimeout(t,200))}()}),!1);class M{constructor(e,t){this.colors=i[e],this.y=1-e/(o-1)*2;let s=Math.sqrt(1-this.y*this.y);this.theta=p*e,this.x=Math.cos(this.theta)*s,this.z=Math.sin(this.theta)*s,this.paths=t,this.xProjected=0,this.yProjected=0,this.scaleProjected=0}rotate(){let e=this.x*Math.cos(g)-this.y*Math.sin(g),t=this.x*Math.sin(g)+this.y*Math.cos(g),i=e*Math.cos(f)-this.z*Math.sin(f),s=e*Math.sin(f)+this.z*Math.cos(f),o=t*Math.cos(u)-s*Math.sin(u),r=t*Math.sin(u)+s*Math.cos(u);this.x=i,this.y=o,this.z=r}project(){this.rotate(),this.scaleProjected=n/(n+this.z*h),this.xProjected=this.x*h*this.scaleProjected+c-64*this.scaleProjected,this.yProjected=this.y*h*this.scaleProjected+d-64*this.scaleProjected}draw(){this.project(),a.save(),a.globalAlpha=Math.abs(1-3*this.z*h/l),a.beginPath(),a.translate(this.xProjected,this.yProjected),a.scale(1.1*this.scaleProjected*l/1920,1.1*this.scaleProjected*l/1920),this.paths.forEach(((e,t)=>{a.fillStyle=this.colors[t],a.fill(e)})),a.restore()}}const j=s.map(((e,t)=>new M(t,e)));!function e(){a.fillStyle="#1D1D1D",a.fillRect(0,0,l,m),j.sort(((e,t)=>e.scaleProjected-t.scaleProjected)),j.forEach((e=>{e.draw()})),window.requestAnimationFrame(e)}()}wave(),sphere();const form=document.getElementById("contact-form"),formSuccess=document.getElementById("form-success"),formError=document.getElementById("form-error"),formButtom=document.getElementById("contact-form-submit-button"),sending=document.getElementById("sending");formButtom.addEventListener("click",(e=>{sending.classList.remove("hide")}));const sendMail=e=>{fetch("/send-form",{method:"post",body:e}).then((e=>{!0===e.ok?(formSuccess.classList.remove("hide"),sending.classList.add("hide"),form.reset()):(formError.classList.remove("hide"),sending.classList.add("hide"))}))},formEvent=form.addEventListener("submit",(e=>{e.preventDefault();let t=new FormData(form);sendMail(t)})),projectOverview=document.getElementById("project-overview"),container=document.querySelector(".project-overview-img-container"),removeDisplayNone=e=>{e.classList.remove("displayNone")},addDisplayNone=e=>{e.classList.add("displayNone")};projectOverview.addEventListener("click",(e=>{for(projectOverview.classList.add("displayNone");container.firstChild;)container.removeChild(container.firstChild)}));const imageHandler=e=>{let t=e.getElementsByTagName("img"),i=document.createElement("img");switch(t[0].className){case"lithodora":i.src="https://res.cloudinary.com/djg52dvw1/image/upload/v1658052765/portfolio/lithodora_capri_homepage.jpg",i.alt="lithodora capri website",container.appendChild(i);break;case"casarossa":i.src="https://res.cloudinary.com/djg52dvw1/image/upload/v1658052858/portfolio/museo_casa_rossa.jpg",i.alt="museo casa rossa website",container.appendChild(i);break;case"capriadventures":i.src="https://res.cloudinary.com/djg52dvw1/image/upload/v1658053057/portfolio/capri_adventures.jpg",i.alt="capri adventures website",container.appendChild(i);break;default:console.log("error")}};document.querySelectorAll(".project").forEach((e=>{e.addEventListener("click",(t=>{projectOverview.classList.remove("displayNone"),imageHandler(e)}))}));